# CHAPTER 1 테스트 목적과 장애물

### 목차

- [다양한 테스트 방법](#다양한-테스트-방법)
- [테스트 프레임워크 및 도구](#테스트-프레임워크-및-도구)
- [테스트를 작성해야 하는 이유](#테스트를-작성해야-하는-이유)
- [테스트를 작성하면 시간이 절약되는 이유](#테스트를-작성하면-시간이-절약되는-이유)

<br />

## 다양한 테스트 방법

1. 함수 단위 테스트
2. UI 컴포넌트와 단위 테스트
3. UI 컴포넌트와 통합 테스트
4. UI 컴포넌트와 시각적 회귀 테스트
5. E2E 테스트

## 테스트 프레임워크 및 도구

- [Jest](https://jestjs.io/docs/getting-started)
  - 명령줄 인터페이스 기반 테스트 프레임워크 및 테스트 러너(테스트 실행기)
- [Playwright](https://playwright.dev/docs/intro)
  - 헤드리스 브라우저를 포함한 테스트 프레임워크 및 테스트 러너
- [reg-suit](https://github.com/reg-viz/reg-suit#getting-started)
  - 시각적 회귀 테스트 프레임워크
- [Storybook](https://storybook.js.org/docs)
  - UI 컴포넌트 탐색기

## 테스트를 작성해야 하는 이유

1. 사업의 신뢰성
   - 버그는 서비스 이미지를 추락시킨다.
   - 한 번 추락한 이미지를 회복하려면 많은 시간과 비용이 필요하다.
   - 테스트 코드를 작성하는 습관을 들이면 BFF 같은 핵심 기능에 발생할 수 있는 버그를 사전에 발견할 수 있다.
2. 높은 유지보수성
   - 개발을 진행하다 보면 반복적인 코드를 재사용하기 위한 리팩터링이 필요하다.
   - 만약 작성한 테스트 코드가 있다면 리팩터링 시 기존 기능에 문제가 생겼는지 반복적으로 확인할 수 있어, 적극적으로 리팩터링을 진행할 수 있다.
   - 모던 프런트엔드 개발은 수많은 라이브러리에 의존할 수밖에 없기 때문에, 라이브러리를 업데이트할 때도 코드를 수정해야 한다.
   - 작성해놓은 테스트 코드가 있다면 '마이너 업데이트는 테스트를 통과하면 병합할 수 있다'같은 원칙을 세워야 한다.
3. 코드 품질 향상
   - 한 컴포넌트가 하나의 책임만 가지도록(SOLID 단일 책임 원칙) 여러 개의 컴포넌트로 분리하면, 구현 코드의 책임을 파악하기 쉬운 것은 물론 테스트 작성도 쉬워진다.
   - 테스트 코드를 작성하면 자연스럽게 스크린 리더 등의 보조 기기를 사용하는 사용자에게도 콘텐츠가 인식될 수 있는지 알 수 있다.
   - 구현 코드와 테스트 코드를 같이 작성하면 그 과정에서 지속적으로 구현 코드를 반추하게 되므로 자연스럽게 코드 품질이 향상된다.
4. 원활한 협업
   - 팀 단위 개발에서는 다른 개발자에 대한 배려가 필요하다.
   - 테스트 코드는 글로 작성된 문서보다 우수한 사양서다. 각 테스트에는 제목이 있어 테스트할 구현 코드가 어떤 기능을 제공하고, 어떤 방식으로 작동하는지 파악할 수 있다.

## 테스트를 작성하면 시간이 절약되는 이유

단기적인 관점에서 보면 테스트 작성은 많은 시간을 소모하지만 장기적인 관점에서 보면 오히려 시간이 절약된다.

한 개발자가 작성한 코드에 버그가 발견된 상황을 가정하고 비교해보자. 기능 구현에는 16시간, 테스트 자동화에는 4시간이 걸린다고 가정하겠다.

- 개인이 걸리는 시간

  - 테스트 자동화 X: `기능 개발`
  - 테스트 자동화 O: `기능 개발` + `테스트 자동화`

  테스트 자동화를 한 경우 네 시간 이내에 버그를 발견하여 해결할 가능성이 높다. 걸린 시간은 총 20시간이다.

  테스트 자동화를 하지 않은 경우 걸린 시간은 총 16시간이다. 단순히 걸린 시간만 보면 테스트 자동화를 하지 않은 쪽이 빠르다.

  그러나 QA팀의 수동 테스트 과정에서 버그가 발견됐다면 어떻게 될까?

- 팀이 걸리는 시간

  - 테스트 자동화 X: `기능 개발` + `반복 작업`
  - 테스트 자동화 O: `기능 개발` + `테스트 자동화`

  버그를 수정하고 해결됐는지 수동으로 재검토하는 반복 작업을 해야 한다. 반복 작업은 적어도 4시간이 걸린다.

  즉, 테스트를 작성하지 않아도 버그가 발견되면 개발에 걸리는 시간은 20시간이 넘는다.

- 장기적으로 팀이 걸리는 시간
  - 테스트 자동화 X: `기능 개발` + `반복 작업` + `회귀 테스트`
  - 테스트 자동화 O: `기능 개발` + `테스트 자동화`

게다가 장기적으로는 자동화된 테스트 코드가 반복 작업에 걸리는 시간을 줄여준다.
